<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard</title>
</head>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.min.css">
<link rel="stylesheet" href="//rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/css/bootstrap-editable.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/editable/bootstrap-table-editable.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/export/bootstrap-table-export.js"></script>
<script src="//rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.js"></script>
<style>
    @import url(https://unpkg.com/@webpixels/css@1.1.5/dist/index.css);
    @import url("https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.0/font/bootstrap-icons.min.css");
    *{
        font-size: 13px !important;
    }
    input[type="date"] {
  display:block;
  position:relative;
  padding:1rem 3.5rem 1rem 0.75rem;
  
  font-size:1rem;
  font-family:monospace;
  
 
  
  background:
    white
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='22' viewBox='0 0 20 22'%3E%3Cg fill='none' fill-rule='evenodd' stroke='%23688EBB' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' transform='translate(1 1)'%3E%3Crect width='18' height='18' y='2' rx='2'/%3E%3Cpath d='M13 0L13 4M5 0L5 4M0 8L18 8'/%3E%3C/g%3E%3C/svg%3E")
    right 1rem
    center
    no-repeat;
  
  cursor:pointer;
}
input[type="date"]:focus {
  outline:none;
  border-color:#3acfff;
  box-shadow:0 0 0 0.25rem rgba(0, 120, 250, 0.1);
}

::-webkit-datetime-edit {}
::-webkit-datetime-edit-fields-wrapper {}
::-webkit-datetime-edit-month-field:hover,
::-webkit-datetime-edit-day-field:hover,
::-webkit-datetime-edit-year-field:hover {
  background:rgba(0, 120, 250, 0.1);
}
::-webkit-datetime-edit-text {
  opacity:0;
}
::-webkit-clear-button,
::-webkit-inner-spin-button {
  display:none;
}
::-webkit-calendar-picker-indicator {
  position:absolute;
  width:2.5rem;
  height:100%;
  top:0;
  right:0;
  bottom:0;
  
  opacity:0;
  cursor:pointer;
  
  color:rgba(0, 120, 250, 1);
  background:rgba(0, 120, 250, 1);
 
}

input[type="date"]:hover::-webkit-calendar-picker-indicator { opacity:0.05; }
input[type="date"]:hover::-webkit-calendar-picker-indicator:hover { opacity:0.15; }

#search{
    display: flex;
    justify-content: center;
    align-items: center;
    width: fit-content;
    flex-wrap: wrap;
    gap: 1rem;
}
#search * , .form-control2{
    padding: 1rem;
    border:1px solid #2956eb;
    border-radius:0.25rem;
}
#page{
    font-size: 1.5rem !important;
}
</style>
<body>
    <div class="d-flex flex-column flex-lg-row h-lg-full bg-surface-secondary">
        <nav class="navbar show navbar-vertical h-lg-screen navbar-expand-lg px-0 py-3 navbar-light bg-white border-bottom border-bottom-lg-0 border-end-lg"
            id="navbarVertical">
            <div class="container-fluid">
                <!-- Toggler -->
                <button class="navbar-toggler ms-n2" type="button" data-bs-toggle="collapse"
                    data-bs-target="#sidebarCollapse" aria-controls="sidebarCollapse" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- Brand -->
                <a class="navbar-brand py-lg-2 mb-lg-5 px-lg-6 me-0" href="/">
                    <img src="https://rupeexpert.com/Svg-XpertRupees/XpertRupees_Logo.svg" alt="...">
                </a>

                <!-- Collapse -->
                <div class="collapse navbar-collapse" id="sidebarCollapse">
                    <!-- Navigation -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/dashboard/overview">
                                <i class="bi bi-house"></i> Overview
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/dashboard/leads">
                                <i class="bi bi-people"></i> Leads
                            </a>
                        </li>
                        <% if (role==='admin' ) { %>
                            <li class="nav-item">
                                <a class="nav-link" href="/dashboard/users">
                                    <i class="bi bi-people"></i> Users
                                </a>
                            </li>
                            <% } %>
                    </ul>
                    <!-- Divider -->
                    <hr class="navbar-divider my-5 opacity-20">
                    <!-- Navigation -->

                    <!-- Push content down -->
                    <div class="mt-auto"></div>
                    <!-- User (md) -->
                    <ul class="navbar-nav">

                        <li class="nav-item">
                            <a class="nav-link" href="/auth/logout">
                                <i class="bi bi-box-arrow-left"></i> Logout
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Main content -->
        <div class="h-screen flex-grow-1 overflow-y-lg-auto">
             <!-- Header -->
             <header class="bg-surface-primary border-bottom pt-6">
                <div class="container-fluid">
                    <div class="mb-npx">
                        <div class="row align-items-center">
                            <div class="col-sm-6 col-12 mb-4 mb-sm-0">
                                <h1 id="createbtn" class="h2 mb-0 ls-tight">All Leads</h1>
                            </div>
                            <div class="col-sm-6 col-12 text-sm-end">
                            </div>
                        </div>
                        <ul class="nav nav-tabs mt-4 overflow-x border-0">
                        </ul>
                    </div>
                </div>
            </header>
            <!-- Main -->
            <main class="py-6 bg-surface-secondary">
                <div class="container-fluid">
                    <div class="searchContainer">
                        <h1>Search All</h1>
                        <form id="search" action="/dashboard/search" method="GET">
                            <input type="text" name="q" placeholder="Search by Full Name">
                            <input type="date" name="date" placeholder="Search by Date">
                            <input type="submit" value="Search">
                          </form>
                        <div id="toolbar">
                            <select class="form-control2">
                                    <option value="all">Export All</option>
                                    <option value="selected">Export Selected</option>
                            </select>
                    </div>
                    </div>
                <table id="table" 
                             data-toggle="table"
                             data-search="false"
                             data-filter-control="true" 
                             data-show-export="true"
                             data-click-to-select="true"
                             data-toolbar="#toolbar"
                       class="table-responsive">
                    <thead>
                        <tr>
                            <th data-field="state" data-checkbox="true"></th>
                            <th data-field="prenom" data-filter-control="input" data-sortable="true">Full Name</th>
                            <th data-field="date" data-filter-control="input" data-sortable="true">Date</th>
                            <th data-field="Occu" data-filter-control="select" data-sortable="true">Occupation</th>
                            <th data-field="phno" data-filter-control="input" data-sortable="true">Contact No</th>
                            <th data-field="amount" data-filter-control="input" data-sortable="true">MonthlyNetSalary</th>
                            <th data-field="amount2" data-filter-control="input" data-sortable="true">YearlyTurnover</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% loans.forEach(function(loan) { %>
                            <tr>
                              <td class="bs-checkbox "><input data-index="0" name="btSelectItem" type="checkbox"></td>
                              <td><%= loan.fullName %></td>
                              <td><% 
                                const date = new Date(loan.createdAt);
                                const day = date.getDate().toString().padStart(2, '0');
                                const month = date.toLocaleString('default', { month: 'short' });
                                const year = date.getFullYear();
                              %>
                              <%= `${day}/${month}/${year}` %></td>
                              <td><%= loan.occupation %></td>
                              <td><%= loan.contactNo %></td>
                              <td><%= loan.monthlyNetSalary%></td>
                              <td><%= loan.yearlyTurnover %></td>
                            </tr>
                          <% }); %> 
                    </tbody>
                </table>
                Page No
                <% for(let i = 1; i <= pages; i++) { %>
                    <a id="page" href="/dashboard/leads?page=<%= i %>"><%= i %></a>
                    <% } %> 
                </div>
            </main>
          
        </div>
</body>
<script>
    document.querySelector('.navbar-toggler').addEventListener("click", () => {
        document.querySelector('.navbar-collapse').classList.toggle("collapse")
    })
</script>

</html>